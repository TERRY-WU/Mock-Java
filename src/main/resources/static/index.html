<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Service</title>
    <style type="text/css">
    .comments {
     width:100%;/*自动适应父布局宽度*/
     overflow:auto;
     word-break:break-all;
    }
    .submit {
        width: 80px;
        height: 35px;
    }
    </style>    
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    <table>
        <tr>
            <td>API Name: </td> 
            <td><input type="text" size="50" id="api"></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>JSON Data: </td> 
            <td><textarea class="comments" rows="38" cols="50" id="text"></textarea></td>
            <td></td>
            <td></td>
            <td>Data from Server: </td>
            <td><textarea class="comments" rows="38" cols="50" id="text-srv"></textarea></td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button class="submit" id="btn">Submit</button> &nbsp; 
                <button class="submit" id="cancel">Clean</button> &nbsp; 
                <button class="submit" id="get">Get</button> &nbsp; 
                <button class="submit" id="post">Post</button>
            </td>
            <td></td>
            <td></td>
        </tr>
      
    </table>

    <script>
        var cancel = document.getElementById("cancel");
        var text = document.getElementById("text");
        var api = document.getElementById("api");
        cancel.onclick = function(){
            text.value = "";
            // console.log(api.value);
        }
    </script>

    <script>
        $('#btn').on('click',function () {
            var api = document.getElementById('api').value;
            var text = document.getElementById('text').value;
            // console.log(text);
            // console.log(api);
            $.ajax({
                // url:'http://127.0.0.1:8090/api/v1/json/data',
                url:'http://192.168.88.12:8090/api/v1/json/data',
                type:'post',
                // data:JSON.stringify(text),
                data:text,
                headers: {
                     "Content-Type":"application/json; charset=utf8",
                     "API-Name": api //自定义的请求头,后端servlet通过request.getHeader("API-Name")来获取名字;
                },
                success:function (data) {
                    var res = JSON.stringify(data)
                    // $('#t3').val(res)
                    alert(res)
                }
            })
        })
    </script>

    <script>
        $('#get').on('click',function () {
            var apiValue = document.getElementById("api").value;
            var textSrv = document.getElementById("text-srv").value;
            var api = apiValue.trim();
            if (typeof(api)=="undefined" || api=='' || api==null || api.length==0){
                api="example";
                }
            console.log(api);
            console.log(textSrv);
            $.ajax({
                headers: {
                     "Content-Type":"application/json; charset=utf8",
                },
                // url:'http://127.0.0.1:8090/api/v1/json/get/' + api,
                url:'http://192.168.88.12:8090/api/v1/json/get/' + api,
                type:'get',
                // data:{name:'test001'},
                dataType:'json',
                success:function (res) {
                    var result = JSON.stringify(res)
                    $('#text-srv').val()
                    $('#text-srv').val(result)
                }
            })
        })
    </script>

    <script>
        $('#post').on('click',function () {
            var apiValue = document.getElementById("api").value;
            var textSrv = document.getElementById("text-srv").value;
            var api = apiValue.trim();
            if (typeof(api)=="undefined" || api=='' || api==null || api.length==0){
                api="example";
                }
            console.log(api);
            console.log(textSrv);
            $.ajax({
                headers: {
                    "Content-Type":"application/json; charset=utf8",
                },
                // url:'http://127.0.0.1:8090/api/v1/json/post/' + api,
                url:'http://192.168.88.12:8090/api/v1/json/post/' + api,
                data:{"id":1},
                type:'post',
                dataType:'json',
                success:function (res) {
                    var result = JSON.stringify(res)
                    $('#text-srv').val()
                    $('#text-srv').val(result)
                }
            })
        })
    </script>

</body>
</html>