<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Service</title>
    <style type="text/css">
    .comments {
     width:100%;/*自动适应父布局宽度*/
     overflow:auto;
     word-break:break-all;
    }
    .submit {
        width: 80px;
        height: 35px;
    }
    </style>    
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    <table>
        <tr>
            <td>API Name: </td> 
            <td><input type="text" size="45" id="api"></td>
            <td></td>
            <td></td>
            <td align="right">Search API: </td>
            <td><input type="text" size="45" id="search"></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>JSON Data: </td> 
            <td><textarea class="comments" rows="45" cols="40" id="text-left"></textarea></td>
            <td></td>
            <td></td>
            <td align="right">Data from Server: </td>
            <td><textarea class="comments" rows="45" cols="40" id="text-right"></textarea></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>
                <button class="submit" id="btn">Submit</button> &nbsp; 
                <button class="submit" id="cancel">Clean</button> &nbsp; 
                <button class="submit" id="get">V-Get</button> &nbsp;
                <button class="submit" id="post">V-Post</button>
            </td>
            <td></td>
        </tr>
    </table>

    <script>
        var cancel = document.getElementById("cancel");
        var left = document.getElementById("text-left");
        var right = document.getElementById("text-right");
        var api = document.getElementById("api");
        var search = document.getElementById("search");
        cancel.onclick = function(){
            left.value = "";
            right.value = "";
            api.value = "";
            search.value = "";
            // console.log(api.value);
        }
    </script>

    <script>
        $('#btn').on('click',function () {
            var api = document.getElementById('api').value;
            var text = document.getElementById('text-left').value;
            // console.log(text);
            // console.log(api);
            $.ajax({
                // url:'http://localhost:8090/api/v1/json/data',
                url:'http://192.168.88.2:8090/api/v1/json/data',
                type:'post',
                // data:JSON.stringify(text),
                data:text,
                headers: {
                     "Content-Type":"application/json; charset=utf8",
                     "API-Name": api //自定义的请求头,后端servlet通过request.getHeader("API-Name")来获取名字;
                },
                success:function (data) {
                    var res = JSON.stringify(data);
                    // $('#t3').val(res)
                    alert(res);
                }
            })
        })
    </script>

    <script>
        $('#get').on('click',function () {
            var search = document.getElementById("search").value;
            var right = document.getElementById("text-right").value;
            // console.log(api);
            // console.log(right);
            var api = search.trim();
            if (typeof(api)=="undefined" || api=='' || api==null || api.length==0) {
                alert("Search field shouldn't be empty~!");
                // api = 'example';
                }
            else {
                $.ajax({
                headers: {
                     "Content-Type":"application/json; charset=utf8",
                },
                // url:'http://localhost:8090/api/v1/json/get/' + api,
                url:'http://192.168.88.2:8090/api/v1/json/get/' + api,
                type:'get',
                // data:{name:'test001'},
                dataType:'json',
                success:function (res) {
                    var result = JSON.stringify(res);
                    $('#text-right').val();
                    $('#text-right').val(result);
                    }
                })
            }
        })  
    </script>

    <script>
        $('#post').on('click',function () {
            var search = document.getElementById("search").value;
            var right = document.getElementById("text-right").value;
            // console.log(api);
            // console.log(right);
            var api = search.trim();
            if (typeof(api)=="undefined" || api=='' || api==null || api.length==0) {
                // api="example";
                alert("Search field shouldn't be empty~!");
                api = 'example';
                }
            else {
                $.ajax({
                    headers: {
                        "Content-Type":"application/json; charset=utf8",
                    },
                    // url:'http://localhost:8090/api/v1/json/post/' + api,
                    url:'http://192.168.88.2:8090/api/v1/json/post/' + api,
                    // data:{"id":1},
                    type:'post',
                    dataType:'json',
                    success:function (res) {
                        var result = JSON.stringify(res);
                        $('#text-right').val();
                        $('#text-right').val(result);
                    }
                })
            }
        })
    </script>

</body>
</html>